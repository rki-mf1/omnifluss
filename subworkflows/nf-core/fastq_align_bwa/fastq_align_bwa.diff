Changes in component 'nf-core/fastq_align_bwa'
Changes in 'fastq_align_bwa/main.nf':
--- subworkflows/nf-core/fastq_align_bwa/main.nf
+++ subworkflows/nf-core/fastq_align_bwa/main.nf
@@ -15,18 +15,33 @@
     main:
     ch_versions = Channel.empty()
 
+    //sort channels to maintain order across different channels
+    ch_reads_cpy = ch_reads.map { meta, reads -> return [meta.id, meta, reads]}
+    ch_fasta_cpy = ch_fasta.map { meta, fasta -> return [meta.id, meta, fasta]}
+    ch_index_cpy = ch_index.map { meta, index -> return [meta.id, meta, index]}
+
+    ch_bwa_mem_input = ch_reads_cpy.join(ch_fasta_cpy).join(ch_index_cpy)
+        .multiMap{_sample_id, meta, reads, meta2, reference, meta3, bwa_index ->
+            ch_reads: [ meta, reads ]
+            ch_ref: [ meta2, reference ]
+            ch_bwa_index: [ meta3, bwa_index ]
+        }
+
     //
     // Map reads with BWA
     //
-
-    BWA_MEM ( ch_reads, ch_index, ch_fasta, val_sort_bam )
+    BWA_MEM(
+        ch_bwa_mem_input.ch_reads,
+        ch_bwa_mem_input.ch_bwa_index,
+        ch_bwa_mem_input.ch_ref,
+        val_sort_bam
+    )
     ch_versions = ch_versions.mix(BWA_MEM.out.versions.first())
 
-    //
-    // Sort, index BAM file and run samtools stats, flagstat and idxstats
-    //
-
-    BAM_SORT_STATS_SAMTOOLS ( BWA_MEM.out.bam, ch_fasta )
+    BAM_SORT_STATS_SAMTOOLS(
+        BWA_MEM.out.bam,
+        ch_fasta
+    )
     ch_versions = ch_versions.mix(BAM_SORT_STATS_SAMTOOLS.out.versions)
 
     emit:

'subworkflows/nf-core/fastq_align_bwa/meta.yml' is unchanged
'subworkflows/nf-core/fastq_align_bwa/tests/main.nf.test' is unchanged
'subworkflows/nf-core/fastq_align_bwa/tests/main.nf.test.snap' is unchanged
'subworkflows/nf-core/fastq_align_bwa/tests/nextflow.config' is unchanged
'subworkflows/nf-core/fastq_align_bwa/tests/tags.yml' is unchanged
************************************************************
